package sr.core.hist.timelike;

import sr.core.component.NEvent;
import sr.core.component.NPosition;
import sr.core.hist.NDeltaBase;

/** 
 The base event (and corresponding proper-time) for a history defined in terms of <em>displacements</em> from a particular event.

 <em>The delta-base will often exploit a symmetry.</em> For example,
 <ul> 
   <li>for circular motion, it could be related to the center of the circle. 
   In this case, it's not even part of the history of the object.
   <li>for constant proper-acceleration, it could be the turnaround point. 
 </ul>
*/
public final class NTimelikeDeltaBase extends NDeltaBase {

  /** 
   Factory method.
   @param ΔbaseEvent from which a history is generated by "deltas".
   @param ΔbaseEvent_τ is the value of the proper time for the <code>ΔBaseEvent</code>.  
  */
  public static NTimelikeDeltaBase of(NEvent ΔbaseEvent, double ΔbaseEvent_τ) {
    return new NTimelikeDeltaBase(ΔbaseEvent, ΔbaseEvent_τ);  
  }

  /** Factory method for the delta-base at the given position, and with <code>ct=0</code> and proper time = 0. */
  public static NTimelikeDeltaBase of(NPosition position) {
    return new NTimelikeDeltaBase(NEvent.of(0.0, position), 0.0);  
  }

  /** Factory method to derive a delta-base from an event on a history. */
  public static NTimelikeDeltaBase of(NTimelikeHistory history, double ct) {
    return new NTimelikeDeltaBase(history.event(ct), history.τ(ct));  
  }

  /** Factory method using (0,0,0,0) as the delta-base-event, with proper time = 0 as well. */
  public static NTimelikeDeltaBase origin() {
    return new NTimelikeDeltaBase(NEvent.of(0.0, NPosition.of(0.0, 0.0, 0.0)), 0.0);  
  }
  
  public double ΔbaseEvent_τ() {return ΔbaseEvent_τ;}
  
  @Override public String toString() {
    return "DeltaBase event:" + baseEvent() + " τ:" + ΔbaseEvent_τ;
  }
  
  private NTimelikeDeltaBase(NEvent ΔbaseEvent, double ΔbaseEvent_τ) {
    super(ΔbaseEvent);
    this.ΔbaseEvent_τ = ΔbaseEvent_τ;
  }
  
  private double ΔbaseEvent_τ;
}
